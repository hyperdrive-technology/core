# Appendix A

## Title

A Standard Functions

## Introduction

- This appendix contains a complete overview of all the standard PLC functions described by means of examples in Chapter 2.For every standard function of IEC 61131-3, the following information is given:
- -Graphical declaration -(Semantic) description -Specification of some functions in Structured Text (ST).
- Standard functions have input variables (formal parameters) as well as a function value (the returned value of the function). Some input variables are not named. In order to describe their functional behaviour the following conventions apply:
- -An individual input variable without name is designated as "IN" -Several input variables without names are numbered "IN1, IN2, ..., INn" -The function value is designated as "F".
- General data types (such as ANY or ANY_BIT) are used in the description. Their meaning is explained in Section 3.4.3 and they are summarised in Table 3.9. The designator ANY here stands for one of the data types: ANY_BIT, ANY_NUM, ANY_STRING, ANY_DATE or TIME.
- Many standard functions have a textual name as well as an alternative representation with a symbol (e.g. ADD and "+"). In the figures and tables, both versions are given.

## Section A 1

### Title

A.1 Type Conversion Functions

### Figure A 1

#### Description

Graphical declarations of the type conversion functions _*TO***, TRUNC, BCD*TO***, _\_TO_BCD.

#### Caption

Figure A.1. Graphical declarations of the type conversion functions

### Paragraph After Figure

These standard functions convert the input variable into the data type of their function value (type conversion).

### Table A 1

| Name       | Function / Description                                                                                                                                                                                   |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| \*_TO_\*\* | When REAL values are converted to INT values, they are rounded up or down to the next whole number. Halves, e.g. 0.5 or 0.05, are rounded up.                                                            |
| TRUNC      | This function cuts off the places of a REAL value after the decimal point to form an integer value.                                                                                                      |
| BCD        | The input and/or output values of type ANY_BIT represent BCD coded bit strings for the data types BYTE, WORD, DWORD and LWORD. BCD coding is not defined by IEC 61131-3, it is implementation-dependent. |

### Caption Table A 1

Table A.1. Description of the type conversion functions

## Section A 2

### Title

A.2 Numerical Functions

### Figure A 2

#### Description

Graphical declarations of the numerical functions ABS and others represented by \*\*\* (SQRT, LN, LOG, EXP, SIN, COS, TAN, ASIN, ACOS, ATAN).

#### Caption

Figure A.2. Graphical declarations of the numerical functions

### Table A 2

| Name | Function               | Description      |
| ---- | ---------------------- | ---------------- |
| ABS  | Absolute value         | F := \| IN \|    |
| SQRT | Square root            | F := √IN         |
| LN   | Natural logarithm      | F := loge (IN)   |
| LOG  | Logarithm base 10      | F := log10 (IN)  |
| EXP  | Exponent base e        | F := eIN         |
| SIN  | Sine, IN in radians    | F := SIN (IN)    |
| COS  | Cosine, IN in radians  | F := COS (IN)    |
| TAN  | Tangent, IN in radians | F := TAN (IN)    |
| ASIN | Principal arc sine     | F := ARCSIN (IN) |
| ACOS | Principal arc cosine   | F := ARCCOS (IN) |
| ATAN | Principal arc tangent  | F := ARCTAN (IN) |

### Caption Table A 2

Table A.2. Description of the numerical functions

## Section A 3

### Title

A.3 Arithmetic Functions

### Figure A 3

#### Description

Graphical declarations of the arithmetic functions ADD, MUL, SUB and DIV.

#### Caption

Figure A.3. Graphical declarations of the arithmetic functions ADD, MUL, SUB and DIV

### Figure A 4

#### Description

Graphical declarations of the standard arithmetic functions MOD, EXPT and MOVE.

#### Caption

Figure A.4. Graphical declarations of the standard arithmetic functions MOD, EXPT and MOVE

### Table A 3

| Name | Symbol | Function            | Description                 |
| ---- | ------ | ------------------- | --------------------------- |
| ADD  | +      | Addition            | F := IN1 + IN2 + ... + INn  |
| MUL  | \*     | Multiplication      | F := IN1 _ IN2 _ ... \* INn |
| SUB  | -      | Subtraction         | F := IN1 - IN2              |
| DIV  | /      | Division            | F := IN1 / IN2              |
| MOD  | -      | Remainder formation | F := IN1 - (IN1/ IN2)\*IN2  |
| EXPT | \*\*   | Exponentiation      | F := IN1^IN2                |
| MOVE | :=     | Assignment          | F := IN                     |

### Caption Table A 3

Table A.3. Description of the arithmetic functions

## Section A 4

### Title

A.4 Bit-Shift Functions

### Paragraphs

- ADD and SUB use the type ANYMAGNITUDE, which includes operations on TIME. EXPT uses the type ANY_REAL for IN1 and the type ANY_NUM for IN2. MOVE uses ANY for input and output.
- In the case of the division of integers, the result must also be an integer. If necessary, the result is truncated in the direction of zero.
- If the input parameter IN2 is zero, an error is reported at run time with error cause "division by zero", see also Appendix E.

### Figure A 5

#### Description

Graphical declarations of the bit-shift functions SHL, SHR, ROL and ROR.

#### Caption

Figure A.5. Graphical declarations of the bit-shift functions SHL, SHR, ROR and ROL

### Table A 4

| Name | Function            | Description                                                    |
| ---- | ------------------- | -------------------------------------------------------------- |
| SHL  | Shift to the left   | Shift IN to the left by N bits, fill with zeros from the right |
| SHR  | Shift to the right  | Shift IN to the right by N bits, fill with zeros from the left |
| ROR  | Rotate to the right | Shift IN to the right by N bits, in a circle                   |
| ROL  | Rotate to the left  | Shift IN to the left by N bits, in a circle                    |

### Caption Table A 4

Table A.4. Description of the bit-shift functions. Input N must be greater than or equal to zero.

## Section A 5

### Title

A.5 Bitwise Boolean Functions

### Figure A 6

#### Description

Graphical declarations of the bitwise Boolean functions AND, OR, XOR and NOT.

#### Caption

Figure A.6. Graphical declarations of the bitwise Boolean functions AND, OR, XOR and NOT

### Table A 5

| Name | Symbol | Function       | Description                      |
| ---- | ------ | -------------- | -------------------------------- |
| AND  | &      | Bit-by-bit AND | F := IN1 & IN2 & ... & INn       |
| OR   | >=1    | Bit-by-bit OR  | F := IN1 v IN2 v ... v INn       |
| XOR  | =2k+1  | Bit-by-bit XOR | F := IN1 XOR IN2 XOR ... XOR INn |
| NOT  | -      | Negation       | F := ¬ IN                        |

### Caption Table A 5

Table A.5. Description of the bitwise Boolean functions

### Paragraphs After Table

- The logic operation is performed on the input parameters bit-by-bit. That is, every bit position of one input is gated with the corresponding bit position of the other input and the result is stored in the same bit position of the function value.
- An inversion can also be represented graphically by a circle "o" at the Boolean input or output of a function.

## Section A 6

### Title

A.6 Selection Functions for Max., Min. and Limit

### Figure A 7

#### Description

Graphical declarations of the selection functions MAX, MIN and LIMIT.

#### Caption

Figure A.7. Graphical declarations of the selection functions MAX, MIN and LIMIT

### Table A 6

| Name  | Function          | Description                    |
| ----- | ----------------- | ------------------------------ |
| MAX   | Maximum formation | F := MAX (IN1, IN2, ... , INn) |
| MIN   | Minimum formation | F := MIN (IN1, IN2, ... , INn) |
| LIMIT | Limit             | F := MIN (MAX (IN, MN), MX)    |

### Caption Table A 6

Table A.6. Description of the selection functions MAX, MIN and LIMIT

### Paragraph After Table

These three standard functions are specified by declarations in ST in Example A.1 and Example A.2.

### Example A 1

#### Code

FUNCTION MAX : ANY_ELEMENTARY (_ maximum formation _)
VAR_INPUT IN1, IN2, ... INn : ANY_ELEMENTARY; END_VAR
VAR Elem : ANY_ELEMENTARY; END_VAR
(_ ANY_ELEMENTARY stands for any data type_)
IF IN1 > IN2 THEN (_ first comparison _)
Elem := IN1;
ELSE
Elem := IN2;
END_IF;
IF IN3 > Elem THEN (_ next comparison _)
Elem := IN3;
END_IF;
...
IF INn > Elem THEN (_ last comparison _)
Elem := INn;
END_IF;
MAX := Elem; (_ writing the function value _)
END_FUNCTION

#### Caption

Example A.1. Specification of the selection function MAX in ST; for MIN replace all „>“ with „<“.

### Paragraph After Example A 1

The specification of the MIN function can be obtained by replacing all occurrences of ">" by "<" in the MAX specification in Example A.1.

### Example A 2

#### Code

FUNCTION LIMIT : ANY_ELEMENTARY (_ limit formation _)
VAR_INPUT
MN : ANY_ELEMENTARY;
IN : ANY_ELEMENTARY;
MX : ANY_ELEMENTARY;
END_VAR
MAX := MIN ( MAX ( IN, MN), MX); (_ call of MIN of MAX _)
END_FUNCTION

#### Caption

Example A.2. Specification of the selection function LIMIT in ST

## Section A 7

### Title

A.7 Selection Functions for Binary Selection and Multiplexers

### Figure A 8

#### Description

Graphical declarations of the selection functions SEL and MUX.

#### Caption

Figure A.8. Graphical declarations of the selection functions SEL and MUX

### Table A 7

| Name | Function         | Description                       |
| ---- | ---------------- | --------------------------------- |
| SEL  | Binary selection | F := IN0, if G = 0, otherwise IN1 |
| MUX  | Multiplexer      | F := INi, if K = i and 0<=K<=n-1  |

### Caption Table A 7

Table A.7. Description of the selection functions SEL and MUX

### Paragraph After Table

These two standard functions are specified in the following examples by declaration in ST:

### Example A 3

#### Code

FUNCTION SEL : ANY (_ binary selection _)
VAR_INPUT
G : BOOL;
IN0 : ANY;
IN1 : ANY;
END_VAR
IF G = 0 THEN
SEL := IN0; (_ selection of upper input _)
ELSE
SEL := IN1; (_selection of lower input _)
END_IF;
END_FUNCTION

#### Caption

Example A.3. Specification of the selection function SEL in ST

### Example A 4

#### Code

FUNCTION MUX : ANY (_ multiplexer _)
VAR_INPUT
K : ANY_INT;
IN0 : ANY;
IN1 : ANY;
...
Inn-1 : ANY;
END_VAR
IF (K < 0) OR (K>n-1) THEN
... error message .... ; (_ K negative or too large _)
END_IF;
CASE K OF
0: MUX := IN0; (_ selection of upper input _)
1: MUX := IN1; (_ selection of second input _)
...
n-1: MUX := INn; (_ selection of lowest input _)
END_CASE;
END_FUNCTION

#### Caption

Example A.4. Specification of the selection function MUX in ST

## Section A 8

### Title

A.8 Comparison Functions

### Figure A 9

#### Description

Graphical declarations of the comparison functions GT, GE, LT, LE, EQ, NE.

#### Caption

Figure A.9. Graphical declarations of the comparison functions GT, GE, LT, LE, EQ, NE

### Table A 8

| Name | Function            | Description                            |
| ---- | ------------------- | -------------------------------------- |
| GT   | Comparison for „> “ | F := 1, if INi > IN(i+1), otherwise 0  |
| GE   | Comparison for„> =“ | F := 1, if INi >= IN(i+1), otherwise 0 |
| LT   | Comparison for„< “  | F := 1, if INi < IN(i+1), otherwise 0  |
| LE   | Comparison for„< =“ | F := 1, if INi <= IN(i+1), otherwise 0 |
| EQ   | Comparison for„= “  | F := 1, if INi = IN(i+1), otherwise 0  |
| NE   | Comparison for„<>“  | F := 1, if INi <> IN(i+1), otherwise 0 |

### Caption Table A 8

Table A.8. Description of the comparison functions

### Paragraph After Table

The specification of these standard functions is illustrated in Example A.5 by the declaration of GT in ST, from which the others can easily be derived.

### Example A 5

#### Code

FUNCTION GT : BOOL (_ comparison for ‘greater than’ _)
VAR_INPUT IN1, IN2, ... INn : ANY_ELEMENTARY; END_VAR
IF (IN1 > IN2)
AND (IN2 > IN3)
...
AND (IN(n-1) > INn) THEN
GT := TRUE; (_ inputs are "sorted": in increasing monotonic sequence _)
ELSE
GT := FALSE; (_ condition not fulfilled _)
END_IF;
END_FUNCTION

#### Caption

Example A.5. Specification of the comparison function GT in ST

## Section A 9

### Title

A.9 Character String Functions

### Figure A 10

#### Description

Graphical declarations of the character string functions LEFT, RIGHT, MID and LEN.

#### Caption

Figure A.10. Graphical declarations of the character string functions LEFT, RIGHT, MID and LEN

### Figure A 11

#### Description

Graphical declaration of the character string function CONCAT.

#### Caption

Figure A.11. Graphical declaration of the character string function CONCAT

### Figure A 12

#### Description

Graphical declarations of the character string functions INSERT and DELETE.

#### Caption

Figure A.12. Graphical declarations of the character string functions INSERT and DELETE

### Figure A 13

#### Description

Graphical declarations of the character string functions REPLACE and FIND.

#### Caption

Figure A.13. Graphical declarations of the character string functions REPLACE and FIND

### Table A 9

| Name    | Function                                                   | Description                                                                      |
| ------- | ---------------------------------------------------------- | -------------------------------------------------------------------------------- |
| LEN     | Determines the length of a character string                | F := number of the characters in IN                                              |
| LEFT    | Starting section of a character string                     | F := starting section with L characters                                          |
| RIGHT   | Final section of a character string                        | F := final section with L characters                                             |
| MID     | Central section of a character string                      | F := middle section from position P with L characters                            |
| CONCAT  | Sequence of character strings                              | F := total character string                                                      |
| INSERT  | Inserts one character string into another one              | F := total character string with new part from position P                        |
| DELETE  | Deletes section in a character string                      | F := remaining character string with deleted part (L characters) from position P |
| REPLACE | Replaces a section of a character string with another one  | F := total character string with replaced part (L characters) from position P    |
| FIND    | Determines the position of a section in a character string | F := index of the found position, otherwise 0                                    |

### Caption Table A 9

Table A.9. Description of the character string functions

### Paragraphs After Table

- The positions of the characters within a character string of type ANY_STRING are numbered starting with position "1".
- Inputs L and P must be greater than or equal to zero.

## Section A 10

### Title

A.10 Functions for Time Data Types

### Figure A 14

#### Description

Graphical declarations of the common functions for addition and subtraction of time (ADD, +, SUB, -).

#### Caption

Figure A.14. Graphical declarations of the common functions for addition and subtraction of time

### Figure A 15

#### Description

Graphical declarations of the additional functions for subtraction of time (SUB, -).

#### Caption

Figure A.15. Graphical declarations of the additional functions for subtraction of time

### Figure A 16

#### Description

Graphical declarations of the functions MUL, DIV and CONCAT_DATE_TOD for time.

#### Caption

Figure A.16. Graphical declarations of the functions MUL, DIV and CONCAT_DATE_TOD for time

### Figure A 17

#### Description

Graphical declarations of the type conversion functions for time (DATE_AND_TIME_TO_TIME_OF_DAY, DATE_AND_TIME_TO_DATE).

#### Caption

Figure A.17. Graphical declarations of the type conversion functions for time

### Paragraphs After Figures

- The abbreviations TOD and DT can be employed as equivalents for the longer keywords TIME_OF_DAY and/or DATE_AND_TIME.
- The function name versions ADD_TIME, SUB_TIME and the combinations ADD_TOD_TIME, ADD_DT_TIME, SUB_DATE_DATE, SUB_TOD_TIME, SUB_TOD_TOD, SUB_DT_TIME, MULTIME, DIVTIME and CONCAT_DATE_TOD can be used as equivalents for the function names ADD and SUB.
- The standard explicitly advises against using the arithmetic symbols "+", "-", "/" and "\*" and the function names ADD, SUB, DIV and MUL to prevent confusion and, as a result, incorrect use.

## Section A 11

### Title

A.11 Functions for Enumerated Data Types

### Paragraph

The standard functions SEL, MUX, EQ and NE can also be employed in some cases for enumerated data types. They are then applied as for integers (values of enumerations correspond to constants "coded" by the programming system).
