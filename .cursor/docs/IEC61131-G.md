# Appendix G

## Title

G IL Syntax Example

## Introduction

- Many of the examples given in this book are formulated in Instruction List (IL). This programming language is widely used and is supported by most programming systems. By including data types previously only found in high-level languages, such as arrays or structures, the IEC 61131-3 Instruction List language opens up new possibilities compared with conventional IL.
- The IL syntax descriptions in this appendix are presented in simplified form in syntax diagrams.
- Syntax diagrams explain the permissible use of delimiters, keywords, literals and names in a readily comprehensible format. They can easily be put into textual form for the development of compilers and define the formal structure of a programming language (syntax of a language). The reader can use the diagrams for reference.
- The syntax descriptions in this appendix go beyond IEC 61131-3 because, in addition to the pure syntax definitions, they also include semantic conditions (consistent use of the current result, use of function parameters, etc.). IEC 61131-3 only offers an informal description of this.
- The rules are outlined in Section G.1. The use of the diagrams is explained in Section G.2 by means of an example.

## Section G 1

### Title

G.1 Syntax Diagrams for IL

### Paragraph 1

If a node in the syntax diagram has further subdivisions (sub-diagram), its name appears in italics. Keywords or terminal symbols which are not further subdivided appear in standard type. For clarity the use of comments is not included. As of version 2 of the standard, a comment is permissible wherever blanks (except for character strings) can be placed. A comment begins with (_, ends with _) and contains any number of alphanumeric characters in between without EOL. Comments cannot be nested.

### Figure G 1

#### Description

Syntax diagrams of an IL instruction sequence with the sub-elements "conditional instruction" and "label". Shows flow from EOLs or Label through Load instruction, Unconditional FB call, Unconditional jump, or Unconditional return to ConInst.

#### Caption

Figure G.1. Syntax diagrams of an IL instruction sequence with the sub-elements "conditional instruction" and "label" (continued on next page)

### Figure G 1 Cont

#### Description

Syntax diagram for Label: Label name followed by colon, leading to EOLs.

#### Caption

Figure G.1. (Continued)

### Paragraphs After Figure G 1

- An IL instruction sequence begins optionally with a (jump) label. This is followed either by a Load instruction followed by one or more conditional instructions ConInst, an unconditional instruction with FB call, a jump or a return (see syntax diagram in Figure G.1).
- The conditional instruction begins with a sequence of instructions with and without brackets and/or function calls. This is followed by a series of (S/R) assignments, conditional calls or jumps.
- The label consists of a label identifier, followed by a colon. It either immediately precedes the first instruction of the sequence or is followed by EOLs (end of line).
- The syntax diagrams for instructions, calls and jumps are given below.

### Figure G 2

#### Description

Syntax diagram of an instruction without brackets: Operator followed by Operand, leading to EOLs.

#### Caption

Figure G.2. Syntax diagram of an instruction without brackets

### Paragraph After Figure G 2

An instruction without brackets (Figure G.2) consists of an IL operator with one operand and the end-of-line EOLs.

### Figure G 3

#### Description

Syntax diagrams of an instruction with brackets. InstWithBrck: Operator, '(', optional LD, Operand, EOLs, followed by InstInBrck, ')', EOLs. InstInBrck: Can be InstWithBrck, InstWoutBrck, FUN call, Assignment, or S/R instruction.

#### Caption

Figure G.3. Syntax diagrams of an instruction with brackets

### Paragraph After Figure G 3

The syntax diagrams in Figure G.3 show the structure of an instruction with brackets. This type of instruction begins with an instruction consisting of an operator followed by an opening bracket and an operand. This can be followed by any number of instructions InstInBck inside the brackets, which are concluded with a closing bracket and EOLs.
These inner instructions can themselves contain brackets (nesting), as well as FUN calls and assignments.

### Figure G 4

#### Description

Syntax diagram for a function call. FUN call with actual parameter: FUN name, optional comma and Operand, EOLs. FUN call with formal parameter: FUN name, Formal parameter, EOLs.

#### Caption

Figure G.4. Syntax diagram for a function call

### Paragraph After Figure G 4

As Figure G.4 shows, a function call consists of the function name together with a number of operands separated by commas as actual parameters of the function. Like a function block, a function can also be called with formal parameters.

### Figure G 5

#### Description

Syntax diagram for formal parameter assignment. Formal parameter: '(', EOL, ParCall, EOL, ')'. ParCall: EOL, optional comma, FormPar, ':=', ActPar.

#### Caption

Figure G.5. Formal parameter assignment

### Paragraph After Figure G 5

As Figure G.4 shows, a function call consists of the function name together with a number of operands separated by commas as actual parameters of the function. Like a function block, a function can also be called with formal parameters.

### Figure G 6

#### Description

Syntax diagrams for a function block call. FB call with actual parameter: CAL, FB name, optional comma and Operand, EOLs. Unconditional FB call: CAL, FB name, Formal parameter, EOLs. Conditional FB call: CALC or CALCN, FB name, Formal parameter, EOLs.

#### Caption

Figure G.6. Syntax diagrams for a function block call

### Paragraph After Figure G 6

Figure G.6 shows the syntax diagrams for conditional and unconditional calls of a function block. The unconditional call begins with CAL, the conditional call with CALC or CALCN. This is followed by the name of the FB instance, and the FB parameters in brackets.
The assignment of an actual parameter to a formal parameter is represented by the symbol ":=". Such assignments are required for every parameter and are separated by commas.

### Figure G 7

#### Description

Syntax diagram for FB call using Method 3. Shows operators S, S1, R, R1, CLK, CU, PV, CD, IN, PT followed by FB name.

#### Caption

Figure G.7. FB call using Method 3

### Paragraph After Figure G 7

A call with the syntax shown in Figure G.7 results only in parameter initialisation or FB execution, depending on the parameters employed; see Section 4.12.

### Figure G 8

#### Description

Syntax diagrams for conditional and unconditional jumps. Unconditional jump: JMP, Label name, EOLs. Conditional jump: JMPC or JMPCN, Label name, EOLs.

#### Caption

Figure G.8. Syntax diagrams for conditional and unconditional jumps

### Paragraph After Figure G 8

For jumps, the label name is specified after the jump operator JMP (unconditional) or JMPC/JMPCN (conditional) (Figure G.8).

### Figure G 9

#### Description

Syntax diagrams for conditional and unconditional return. Unconditional return: RET, EOLs. Conditional return: RETC or RETCN, EOLs.

#### Caption

Figure G.9. Syntax diagrams for conditional and unconditional return

### Paragraph After Figure G 9

The returns shown in Figure G.9 have no operands or parameters.

### Figure G 10

#### Description

Syntax diagram for the Load instruction: LD or LDN, Operand, EOLs.

#### Caption

Figure G.10. Syntax diagram for the Load instruction

### Paragraph After Figure G 10

The Load instruction in Figure G.10 has a single (negatable) operand. It cannot be combined with a bracket or used inside a bracket.

### Figure G 11

#### Description

Syntax diagram for assignment: ST or STN, Operand, EOLs.

#### Caption

Figure G.11. Syntax diagram for assignment

### Paragraph After Figure G 11

Assignments (Figure G.11) consist of the operator ST or STN and the specification of the operand to be stored.

### Figure G 12

#### Description

Syntax diagram for the S/R instruction: S or R, Operand, EOLs.

#### Caption

Figure G.12. Syntax diagram for the S/R instruction

### Paragraph After Figure G 12

An S/R instruction (Figure G.12) consists of the IL operators S or R and one operand.

### Figure G 13

#### Description

Syntax diagram for Operator: Can be NonExt. Operator or Extens. Operator.

#### Caption

Figure G.13. Extensible and non-extensible operators

### Paragraph After Figure G 13

The operators represented in Figure G.13 perform logic operations, and are not used for loading or storage. A distinction is made between extensible and non-extensible operators, as shown below.

### Figure G 14

#### Description

Syntax diagram for Extens. Operator: AND, ANDN, &, &N, OR, ORN, XOR, XORN, ADD, MUL.

#### Caption

Figure G.14. Extensible operators: bitwise Boolean operations, addition and multiplication

### Paragraph After Figure G 14

Figure G.14 shows the extensible operators. They can have more than two input parameters. The bitwise Boolean operators (standard functions) can also be used with inversion.

### Figure G 15

#### Description

Syntax diagram for NonExt. Operator: GT, GE, LT, LE, EQ, NE, SUB, DIV, MOD, NOT.

#### Caption

Figure G.15. Non-extensible operators: comparison, subtraction, division

### Paragraph After Figure G 15

The non-extensible operators in Figure G.15 have exactly two input parameters (including the current result CR).

### Figure G 16

#### Description

Syntax diagram for the EOL (end of line) of an IL instruction.

#### Caption

Figure G.16. Syntax diagram for the EOL (end of line) of an IL instruction

### Paragraph After Figure G 16

An IL line is concluded with a single EOL character (e.g. carriage return / line feed) or a comment followed by EOL (Figure G.16). These elements can occur once or any number of times in sequence.

### Figure G 17

#### Description

Syntax diagrams for Operands, parameters and other elements. ActPar: Operand. Operand: VarId or LITERAL. FormPar: VarId. VarId: IDENTIFIER.

#### Caption

Figure G.17. Operands, parameters and other elements are represented by identifiers and literals.

### Paragraph After Figure G 17

Figure G.17 shows how parameters, operands and other elements are represented using IDENTIFIERs and LITERALs.
For simplicity the syntax diagrams of identifiers and literals are not shown here. The basic principles of their representation are explained in Section 3.2.

## Section G 2

### Title

G.2 IL Example from Syntax Diagrams

### Paragraph 1

The IL syntax diagrams shown on the previous pages will now be used to produce an IL example. This shows how sample programs are constructed from syntax diagrams and vice versa, enabling IL examples to be checked for correctness.

### Example G 1

#### Code

0001 SequenceOne: (_ label _)
0002 (_ simple logic operation with jump _)
0003 LD Var1 (_ load instruction _)
0004 (_ beginning of conditional instructions _)
0005 ANDN Var2 (_ instruction without bracket _)
0006 ORN ( Var3 (_ instruction with bracket _)
0007 AND Var4
0008 ) (_ end of bracketing _)
0009 AND Var5
0010 ST Var6 (_ assignment _)
0011 S Var7 (_ S/R instruction _)
0012 RETC (_ conditional return _)
0013 (_ end of conditional instructions _)
0014 (_ end of IL sequence _)

#### Caption

Example G.1. IL example. The comments refer to the corresponding syntax diagram. The line numbers on the left are used for reference in Table G.1.

### Paragraph After Example G 1

To show how the IL example in Example G.1 can be built up from the syntax diagrams in Section G.1, Table G.1 shows the relevant syntax diagrams for each IL line.

### Table G 1

| Line in Ex. G.1 | Syntax Diagram                | Figures     |
| --------------- | ----------------------------- | ----------- |
| 0001-0014       | IL instruction sequence       | Figure G.1  |
| 0001-0002       | (Jump) label                  | Figure G.1  |
| 0003-0004       | Load instruction              | Figure G.10 |
| 0005            | Instruction without bracket   | Figure G.2  |
| 0005            | Extensible operator ANDN      | Figure G.14 |
| 0006-0008       | Instruction with bracket      | Figure G.3  |
| 0006,0007       | Extensible operators ORN, AND | Figure G.14 |
| 0007,0009       | Instruction without bracket   | Figure G.2  |
| 0007,0009       | Extensible operator AND       | Figure G.14 |
| 0010            | Assignment                    | Figure G.11 |
| 0011            | S/R instruction               | Figure G.12 |
| 0012-0014       | Conditional return            | Figure G.9  |

### Caption Table G 1

Table G.1. Syntax diagrams to be used for each line of the IL sequence in Example G.1

### Paragraphs After Table G 1

- This example shows how a concrete IL program is built up using syntax diagrams. In the syntax diagram for an IL instruction sequence (Figure G.1), first the label with name, colon and comments is inserted, followed by the first (Load) instruction.
- The "conditional instructions" part is made up of two instructions, the first of which with a bracket containing further instructions. After the conditional instructions, the sequence is terminated with assignments and return.
- In this way it is possible to create valid IL sequences from the individual syntax diagrams. Conversely, the relevant syntax diagrams for each IL line can be found in order to determine whether a program section is syntactically correct.
